{"ast":null,"code":"var _jsxFileName = \"/Users/trapbookpro/Development/hwfront/src/components/Store/ViewOrder.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport Navbar from \"../Navbar\";\nimport StepProgressBar from \"../Shelter/ProgressBar\";\nimport { getOrder2, getUserDetails, handleStatusChange, handleStatusChange2, handleDelivererStatusChange } from \"../../functions/index\";\nimport { useParams } from \"react-router-dom\";\nimport MapContainer from \"../Map\";\nimport { Grid } from '@material-ui/core';\nimport TextField from \"@mui/material/TextField\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const ViewOrder = props => {\n  _s();\n\n  const {\n    userDetails,\n    handleLogout\n  } = props;\n  const [order, setOrder] = useState({});\n  const [shelter, setShelter] = useState({});\n  const [request_status, setRequest_status] = useState(\"\");\n  const [delivererName, setDelivererName] = useState(\"\");\n  const [delivererPhone, setDelivererPhone] = useState(\"\");\n  const {\n    id\n  } = useParams();\n  let progress;\n\n  const nextRequestStatus = current_request_status => {\n    if (current_request_status === \"Order Sent\") {\n      setRequest_status(\"Shipped\");\n    } else if (current_request_status === \"Shipped\") {\n      setRequest_status(\"Delivered\");\n    }\n  };\n\n  const handleOnClick = async () => {\n    await handleStatusChange2(id, request_status);\n    await getOrder2(id, setOrder);\n  };\n\n  const handleSubmit = async () => {\n    await handleDelivererStatusChange(id, delivererName, delivererPhone);\n    await getOrder2(id, setOrder);\n  };\n\n  useEffect(async () => {\n    await getOrder2(id, setOrder);\n  }, [request_status]);\n  useEffect(async () => {\n    await getUserDetails(order.ordered_by, setShelter);\n    nextRequestStatus(order.order_status);\n  }, [order]);\n\n  const calculateProgress = () => {\n    if (order) {\n      if (order.order_status === \"Order Sent\") {\n        progress = 25;\n      } else if (order.order_status === \"Shipped\") {\n        progress = 75;\n      } else if (order.order_status === \"Delivered\") {\n        progress = 100;\n      } else {\n        progress = 0;\n      }\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"hero\",\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {\n      handleLogout: handleLogout\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"section-title\",\n      children: \"Order Details\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"map-view-order\",\n      children: shelter.location && order ? /*#__PURE__*/_jsxDEV(MapContainer, {\n        latlng1: {\n          'latitude': userDetails.latitude,\n          'longitude': userDetails.longitude\n        },\n        latlng2: {\n          'latitude': shelter.latitude,\n          'longitude': shelter.longitude\n        },\n        storeName: order.store_name,\n        shelterName: shelter.name,\n        onClick: () => {}\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Loading Maps...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"progress-bar\",\n      children: [calculateProgress(), /*#__PURE__*/_jsxDEV(StepProgressBar, {\n        progress: progress\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"progressbar-labels\",\n        style: {\n          display: \"inline-flex\",\n          marginTop: \"4%\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"progressbar-label progressbar-label1\",\n          children: \"Ordered\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"progressbar-label progressbar-label2\",\n          children: \"Shipped\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"progressbar-label progressbar-label3\",\n          children: \"Delivered\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"buttons\",\n        style: {\n          marginTop: \"5%\"\n        },\n        children: order.order_status !== \"Delivered\" ? /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            handleOnClick();\n          },\n          className: \"mark-as-button\",\n          children: [\"Mark as \", request_status]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 13\n        }, this) : null\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      spacing: 6,\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 7,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"order-details\",\n          style: {\n            margin: \"3% auto\",\n            width: \"100%\",\n            background: `linear-gradient( rgba(0, 0, 0, 0.78), rgba(0, 0, 0, 0.78) ),url(${shelter ? shelter.image ? shelter.image : null : null})`\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"order-listing-title\",\n            children: order.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"order-listing-title2\",\n            children: shelter ? shelter.name : \"Loading...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"order-listing-details\",\n            children: [\"Shelter Email : \", shelter ? shelter.email : \"Loading...\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"order-listing-details\",\n            children: [\"Shelter Phone : \", shelter ? shelter.phone : \"Loading...\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"order-listing-details\",\n            children: [\"Shelter Location : \", shelter ? shelter.location : \"Loading...\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n            className: \"order-listing-details\",\n            children: [\"Quantity : \", order.quantity]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 5,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"store_information\",\n          style: {\n            margin: '3% auto'\n          },\n          children: order.deliverer_name && order.deliverer_phone ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"icon-pic\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: \"https://cdn4.iconfinder.com/data/icons/small-n-flat/24/user-alt-512.png\",\n                height: \"220px\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 152,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"\",\n              children: \"Delivery By:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"\",\n              children: order.deliverer_name ? order.deliverer_name : 'TBD'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"\",\n              children: [\"Contact : \", order.deliverer_name ? order.deliverer_phone : 'TBD']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"new-request-form-items\",\n            children: [/*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(TextField, {\n                required: true,\n                id: \"outlined-required\",\n                label: \"Deliverer Name\",\n                defaultValue: \"\",\n                style: {\n                  width: \"600px\",\n                  marginBottom: '2%'\n                },\n                onChange: e => setDelivererName(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 161,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(TextField, {\n                required: true,\n                id: \"outlined-required\",\n                label: \"Deliverer Phone\",\n                defaultValue: \"\",\n                style: {\n                  width: \"600px\",\n                  marginBottom: '2%'\n                },\n                onChange: e => setDelivererPhone(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 171,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleSubmit(),\n                style: {\n                  width: \"600px\",\n                  backgroundColor: \"rgb(23, 122, 135)\",\n                  marginBottom: \"2%\"\n                },\n                children: \"Assign Deliverer\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 181,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 12\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ViewOrder, \"oSne5JbZ0kIyB9Jj6xyA9FJdQXM=\", false, function () {\n  return [useParams];\n});\n\n_c = ViewOrder;\n\nvar _c;\n\n$RefreshReg$(_c, \"ViewOrder\");","map":{"version":3,"sources":["/Users/trapbookpro/Development/hwfront/src/components/Store/ViewOrder.js"],"names":["React","useEffect","useState","Navbar","StepProgressBar","getOrder2","getUserDetails","handleStatusChange","handleStatusChange2","handleDelivererStatusChange","useParams","MapContainer","Grid","TextField","ViewOrder","props","userDetails","handleLogout","order","setOrder","shelter","setShelter","request_status","setRequest_status","delivererName","setDelivererName","delivererPhone","setDelivererPhone","id","progress","nextRequestStatus","current_request_status","handleOnClick","handleSubmit","ordered_by","order_status","calculateProgress","location","latitude","longitude","store_name","name","display","marginTop","margin","width","background","image","email","phone","quantity","deliverer_name","deliverer_phone","marginBottom","e","target","value","backgroundColor"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport Navbar from \"../Navbar\";\nimport StepProgressBar from \"../Shelter/ProgressBar\";\nimport {\n  getOrder2,\n  getUserDetails,\n  handleStatusChange,\n  handleStatusChange2,\n  handleDelivererStatusChange\n} from \"../../functions/index\";\nimport { useParams } from \"react-router-dom\";\nimport MapContainer from \"../Map\";\nimport {Grid} from '@material-ui/core'; \nimport TextField from \"@mui/material/TextField\";\n\n\nexport const ViewOrder = (props) => {\n  const { userDetails, handleLogout } = props;\n  const [order, setOrder] = useState({});\n  const [shelter, setShelter] = useState({});\n  const [request_status, setRequest_status] = useState(\"\");\n  const [delivererName, setDelivererName] = useState(\"\");\n  const [delivererPhone, setDelivererPhone] = useState(\"\");\n\n  const { id } = useParams();\n\n  let progress;\n\n  const nextRequestStatus = (current_request_status) => {\n    if (current_request_status === \"Order Sent\") {\n      setRequest_status(\"Shipped\");\n    } else if (current_request_status === \"Shipped\") {\n      setRequest_status(\"Delivered\");\n    }\n  };\n\n  const handleOnClick = async () => {\n    await handleStatusChange2(id, request_status);\n    await getOrder2(id, setOrder);\n  };\n\n  const handleSubmit = async () => {\n      await handleDelivererStatusChange(id, delivererName, delivererPhone); \n      await getOrder2(id, setOrder); \n  }\n\n  useEffect(async () => {\n    await getOrder2(id, setOrder);\n  }, [request_status]);\n\n  useEffect(async () => {\n    await getUserDetails(order.ordered_by, setShelter);\n    nextRequestStatus(order.order_status);\n  }, [order]);\n\n  const calculateProgress = () => {\n    if (order) {\n      if (order.order_status === \"Order Sent\") {\n        progress = 25;\n      } else if (order.order_status  === \"Shipped\") {\n        progress = 75;\n      } else if (order.order_status === \"Delivered\") {\n        progress = 100;\n      } else {\n        progress = 0;\n      }\n    }\n  };\n\n  return (\n    <div className=\"hero\">\n      <Navbar handleLogout={handleLogout} />\n      <h1 className=\"section-title\">Order Details</h1>\n      <div className=\"map-view-order\">\n        {shelter.location && order ? (\n          <MapContainer\n            latlng1 = {{'latitude' : userDetails.latitude, 'longitude' : userDetails.longitude}}\n            latlng2 = {{'latitude' : shelter.latitude, 'longitude' : shelter.longitude}}\n            storeName={order.store_name}\n            shelterName={shelter.name}\n            onClick={() => {\n            }}\n          />\n        ) : (\n          <h2>Loading Maps...</h2>\n        )}\n      </div>\n\n      <div className=\"progress-bar\">\n        {calculateProgress()}\n\n        <StepProgressBar progress={progress} />\n\n        <div\n          className=\"progressbar-labels\"\n          style={{ display: \"inline-flex\", marginTop: \"4%\" }}\n        >\n          <p className=\"progressbar-label progressbar-label1\">Ordered</p>\n          <p className=\"progressbar-label progressbar-label2\">Shipped</p>\n          <p className=\"progressbar-label progressbar-label3\">Delivered</p>\n        </div>\n\n        <div className=\"buttons\" style={{ marginTop: \"5%\" }}>\n          {order.order_status !== \"Delivered\" ? (\n            <button\n              onClick={() => {\n                handleOnClick();\n              }}\n              className=\"mark-as-button\"\n            >\n              Mark as {request_status}\n            </button>\n          ) : null}\n        </div>\n      </div>\n\n      <Grid container spacing = {6}>\n        <Grid item xs = {7}>\n          <div\n            className=\"order-details\"\n            style={{\n              margin: \"3% auto\",\n              width: \"100%\",\n              background: `linear-gradient( rgba(0, 0, 0, 0.78), rgba(0, 0, 0, 0.78) ),url(${\n                shelter ? (shelter.image ? shelter.image : null) : null\n              })`,\n            }}\n          >\n            <h2 className=\"order-listing-title\">{order.name}</h2>\n            <h3 className=\"order-listing-title2\">\n              {shelter ? shelter.name : \"Loading...\"}\n            </h3>\n            <h4 className=\"order-listing-details\">\n              Shelter Email : {shelter ? shelter.email : \"Loading...\"}\n            </h4>\n            <h4 className=\"order-listing-details\">\n              Shelter Phone : {shelter ? shelter.phone : \"Loading...\"}\n            </h4>\n            <h4 className=\"order-listing-details\">\n              Shelter Location : {shelter ? shelter.location : \"Loading...\"}\n            </h4>\n            <h5 className=\"order-listing-details\">Quantity : {order.quantity}</h5>\n          </div>\n        </Grid>\n        <Grid item xs = {5}>\n\n\n          <div className = \"store_information\" style = {{margin : '3% auto'}}>\n\n            {order.deliverer_name && order.deliverer_phone ?\n            <> \n            <div className = \"icon-pic\"><img src = \"https://cdn4.iconfinder.com/data/icons/small-n-flat/24/user-alt-512.png\" height = '220px' /></div>\n            <h2 className = \"\">Delivery By:</h2>\n            <h4 className = \"\">{order.deliverer_name ? order.deliverer_name : 'TBD'}</h4>\n            <h4 className = \"\">Contact : {order.deliverer_name ? order.deliverer_phone : 'TBD'}</h4>\n            </>\n           : \n           \n           <ul className=\"new-request-form-items\">\n              <li>\n                <TextField\n                  required\n                  id=\"outlined-required\"\n                  label=\"Deliverer Name\"\n                  defaultValue=\"\"\n                  style={{ width: \"600px\", marginBottom : '2%' }}\n                  onChange = {(e) => setDelivererName(e.target.value)}\n                />\n              </li>\n              <li>\n                <TextField\n                  required\n                  id=\"outlined-required\"\n                  label=\"Deliverer Phone\"\n                  defaultValue=\"\"\n                  style={{ width: \"600px\", marginBottom: '2%'}}\n                  onChange = {(e) => setDelivererPhone(e.target.value)}\n                />\n              </li>\n              <li>\n              <button onClick = {() => handleSubmit()} style = {{width : \"600px\", backgroundColor : \"rgb(23, 122, 135)\", marginBottom:\"2%\"}}>Assign Deliverer</button>\n            </li>\n            </ul>\n\n           }\n\n              \n            </div>\n        </Grid>\n        \n      </Grid>\n\n      \n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}